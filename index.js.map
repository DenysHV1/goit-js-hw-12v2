{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\nconst BASE_URL = 'https://pixabay.com/api/';\nconst KEY = '21553593-5dff095819739d8fe44d39f5a';\n\nexport function search(element, page) {\n\tconst url = `${BASE_URL}?key=${KEY}&q=${element}&image_type=photo&orientation=horizontal&safesearch=true&per_page=15&page=${page}`\n\treturn axios.get(url)\n}\n\n\n","\nexport function renderMarkup(arr, galleryEl) {\n  const markup = arr\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `\n            <li class=\"gallery-list-item\">\n                <a class=\"gallery_link\" href=\"${largeImageURL}\">\n                    <img class=\"gallery_img\" src=\"${webformatURL}\"\n                        alt=\"${tags}\" \n                        title=\"${tags}\" />\n                    <ul class=\"statistics-list\">\n                        <li class=\"statistics-item\">\n                            <p class=\"statistics-item_name\">Likes</p>\n                            <p class=\"statistics_result\">${likes}</p>\n                        </li>\n                        <li class=\"statistics-item\">\n                            <p class=\"statistics-item_name\">Views</p>\n                            <p class=\"statistics_result\">${views}</p>\n                        </li>\n                        <li class=\"statistics-item\">\n                            <p class=\"statistics-item_name\">Comments</p>\n                            <p class=\"statistics_result\">${comments}</p>\n                        </li>\n                        <li class=\"statistics-item\">\n                            <p class=\"statistics-item_name\">Downloads</p>\n                            <p class=\"statistics_result\">${downloads}</p>\n                        </li>\n                    </ul>\n                </a>\n            </li>`;\n      }\n    )\n    .join('');\n  galleryEl.insertAdjacentHTML('beforeend', markup);\n}\n","//library 1\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n//library 2\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\n//imports from folder JS\nimport { search } from './js/pixabay-api';\nimport { renderMarkup } from './js/render-functions';\n\n//const from HTML\nconst galleryListEl = document.querySelector('.gallery-list');\nconst formEl = document.querySelector('form');\nconst loaderEl = document.querySelector('.loader');\nconst loadMoreBtnEl = document.querySelector('.load-more-btn-js');\n\nconst buttonsListEl = document.querySelector('.buttons-list-js');\n\nlet lightbox = new SimpleLightbox('.gallery-list a', {});\n\nlet page = 1;\nlet foundValue = '';\n\nlet pages = 0;\n\nlet galleryListHeight = 0;\n\n//! first function\nconst elementForSearch = async event => {\n  //todo\n  try {\n    //\n    event.preventDefault();\n    //\n    foundValue = event.target.elements.choiceSearch.value.toLowerCase().trim();\n    //\n    page = 1;\n    galleryListEl.innerHTML = '';\n    buttonsListEl.innerHTML = '';\n    //\n    if (!foundValue) {\n      iziToast.error({ message: 'Please enter a search word.' });\n      return;\n    }\n    //\n    loaderEl.style.display = 'block';\n    //\n    const response = await search(foundValue, page);\n    //\n    if (response.data.totalHits === 0) {\n      // loadMoreBtnEl.classList.add('is-hidden');\n      iziToast.info({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n      return;\n    }\n    //\n    renderMarkup(response.data.hits, galleryListEl);\n\n    galleryListHeight = galleryListEl.getBoundingClientRect().height;\n    //\n    if (response.data.totalHits > 15) {\n      pages = Math.ceil(response.data.totalHits / 15);\n      generationButtons(pages);\n    }\n\n    lightbox.refresh();\n    //\n    formEl.reset();\n\n    //todo\n  } catch (err) {\n    iziToast.error({\n      message: err.message,\n      messageColor: '#fff',\n      position: 'topRight',\n      color: '#ef4040',\n      maxWidth: '350px',\n    });\n\n    //todo\n  } finally {\n    loaderEl.style.display = 'none';\n    formEl.reset();\n  }\n};\n\nfunction generationButtons(pages) {\n  const arr = [];\n  for (let i = 1; i <= pages; i += 1) {\n    arr.push(i);\n  }\n  const markupBtn = arr\n    .map(num => `<button type=\"button\" class=\"page-button\">${num}</button>`)\n    .join('');\n  return buttonsListEl.insertAdjacentHTML('beforeend', markupBtn);\n}\n\nlet activeButton = null;\n\nconst oneClickToPage = async event => {\n  try {\n    if (event.target.nodeName !== 'BUTTON') {\n      return;\n    }\n    const myClick = Number(event.target.textContent);\n\n    //todo Добавление backgroundColor к текущей кнопке\n    if (activeButton) {\n      activeButton.style.backgroundColor = '';\n    }\n    if (event.target.style.backgroundColor === '') {\n      event.target.style.backgroundColor = '#4e75ff';\n    }\n    activeButton = event.target;\n    //todo Добавление backgroundColor к текущей кнопке\n\n    page = myClick;\n    loaderEl.style.display = 'block';\n    const response = await search(foundValue, page);\n\n    galleryListEl.innerHTML = '';\n    buttonsListEl.style.display = 'none';\n\n    renderMarkup(response.data.hits, galleryListEl);\n    lightbox.refresh();\n    scrollBy(0, -galleryListHeight);\n  } catch (err) {\n    iziToast.error({\n      message: err.message,\n      messageColor: '#fff',\n      position: 'topRight',\n      color: '#ef4040',\n      maxWidth: '350px',\n    });\n  } finally {\n    loaderEl.style.display = 'none';\n    buttonsListEl.style.display = 'flex';\n  }\n};\n\nformEl.addEventListener('submit', elementForSearch);\n\nbuttonsListEl.addEventListener('click', oneClickToPage);\n"],"names":["BASE_URL","KEY","search","element","page","url","axios","renderMarkup","arr","galleryEl","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","galleryListEl","formEl","loaderEl","buttonsListEl","lightbox","SimpleLightbox","foundValue","pages","galleryListHeight","elementForSearch","event","iziToast","response","generationButtons","err","markupBtn","num","activeButton","oneClickToPage","myClick"],"mappings":"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"}